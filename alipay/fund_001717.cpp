#include "../conf/alipay.h"

/*
 * 基金名称：工银瑞信前沿医疗股票A
 * 基金代码：001717
 * 购买渠道：支付宝
 * 用途：及时卖出
*/

const std::string fund_name = "工银瑞信前沿医疗股票A";
const std::string fund_code = "001717";

const int total = 2;
// 次数,日期,金额,净值,第几次购买净值与目前购买净值对比(写0即可,代码计算)
Fund fund_array[total] = {
    /*{"01", "2021-07-05",  500, 4.7830 },
    {"02", "2021-07-06",  500, 4.5440 },
    {"03", "2021-07-22",  300, 4.8490 },
    {"04", "2021-07-23",  200, 4.6860 },
    {"05", "2021-07-26",  300, 4.4760 },

    {"06", "2021-07-30",  200, 4.6270 },
    {"07", "2021-08-17",  100, 4.4110 },
    {"08", "2021-08-18",  100, 4.4360 },
    {"09", "2021-08-18",  100, 4.4360 },
    {"10", "2021-08-20",  200, 4.3110 },

    {"11", "2021-08-30",  100, 4.4530 },
    {"12", "2021-10-11",  100, 4.6190 },
    {"13", "2021-10-18",  100, 4.6080 },
    {"14", "2021-10-27",  100, 4.5030 },
    {"15", "2021-11-01",  200, 4.4190 },

    {"16", "2021-11-02",  200, 4.3530 },
    {"17", "2021-11-03",  100, 4.3180 },
    {"18", "2021-11-04",  100, 4.2580 },
    {"19", "2021-11-08",  100, 4.1590 },
    {"20", "2021-12-24",  100, 4.1660 },

    {"21", "2022-01-04",  300, 4.0280 },
    {"22", "2022-01-05",  100, 3.9640 },
    {"23", "2022-01-14",  100, 3.9210 },
    {"24", "2022-01-19",  200, 3.8640 },
    {"25", "2022-01-21",  100, 3.7320 },

    {"26", "2022-01-26",  200, 3.6400 },
    {"27", "2022-01-27",  100, 3.5800 },*/
    {"28", "2022-01-28",  200, 3.5820 },
    {"29", "2022-05-18", 2000, 3.2940 },
};


// 买出数据结构
const int total_sell = 5;
// 次数,买入时间,买入金额,买入净值,卖出时间,卖出净值
FundSell fund_sell_array[total_sell] = {
    {"01", "2022-09-22", 2000, 2.9410, "2022-10-14", 3.3100 },
    {"02", "2022-09-14", 2000, 3.1580, "2022-10-27", 3.3900 },
    {"03", "2022-04-25", 1000, 3.2040, "2022-11-04", 3.4400 },
    {"04", "2022-05-24", 2000, 3.2200, "2022-11-15", 3.5640 },
    // 2023
    {"05", "2022-05-09", 1000, 3.2460, "2023-01-16", 3.6210 },
};


int main() {
  cout << "\n" << fund_name << "\n";
  unordered_map<std::string, std::pair<std::string, double> > fund_info = get_fund_info();
  if (fund_info.find(fund_code) == fund_info.end()) {
    return 0;
  }
  std::pair<std::string, double> tmp = fund_info[fund_code];
  std::string current_date = tmp.first;
  double current_jingzhi = tmp.second;
  buy_function(fund_array, total, current_jingzhi, current_date);
  
  // 卖出函数
  if (detail_switch) {
    sell_function(fund_sell_array, total_sell);
  }
}